<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Rock, Paper, Scissors</title>
</head>
<body>

<script type="text/javascript">
function game () {

  var choices = ['rock', 'paper', 'scissor']
  var playerScore = 0;
  var computerScore = 0;

  // player's choice
  function playerPlay () {
    let valid = false
    do {
      let playerSelection = prompt('Choose between Rock, Paper or Scissor :').toLowerCase()
      if (choices.includes(playerSelection)) {
        valid = true
        return playerSelection;
      }
    } while ( valid === false )
  }

  // computer's choice
  function computerPlay () {
    return choices[Math.floor(Math.random() * choices.length)];
  }

  // play 1 round
  function playRound (playerSelection, computerSelection) {

  var tie = 'Tie!';
  var win = 'You win! ' + playerSelection + ' beats ' + computerSelection;
  var lose = 'You loose! ' + computerSelection + ' beats ' + playerSelection;

    switch (playerSelection) {
      case 'rock':
        if (computerSelection === 'rock') {
          return tie;
        } else if (computerSelection === 'paper') {
          computerScore += 1;
          return lose;
        } else {
          playerScore += 1;
          return win;
        }
      case 'paper':
        if (computerSelection === 'rock') {
          playerScore += 1;
          return win;
        } else if (computerSelection === 'paper') {
          return tie;
        } else {
          computerScore += 1;
          return lose;
        }
      case 'scissor':
        if (computerSelection === 'rock') {
          computerScore += 1;
          return lose;
        } else if (computerSelection === 'paper') {
          playerScore += 1;
          return win;
        } else {
          return tie;
        }
    }
  }

  for (var i = 1; i < 6; i++) {
    let playerSelection = playerPlay()
    let computerSelection = computerPlay()
    console.log('Round ' + i + ':\n')
    console.log(playRound(playerSelection, computerSelection))
  }

  console.log('\nFinal score :\n')
  console.log('Your score = ' + playerScore + ', Computer score = ' + computerScore)
  if (playerScore > computerScore) {
    console.log('Congratulations! You won! :)');
  } else if (computerScore > playerScore) {
    console.log('Ho nooooo :( You loose :( Better luck next time!');
  } else {
    console.log('Annnnd it\'s a tie!');
  }

}

game();
</script>

</body>
</html>
